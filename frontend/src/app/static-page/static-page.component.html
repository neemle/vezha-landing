<div class="page">
  <header class="topbar">
    <a routerLink="/" class="brand">
      <img class="logo" src="assets/images/logo.svg" alt="VEZHA" />
    </a>
    <div class="lang-select">
      <select
        aria-label="Language"
        #langSelect
        [value]="activeLang()"
        (change)="switchLang(langSelect.value)"
      >
        @for (locale of activeLocales(); track locale.code) {
          <option [value]="locale.code">{{ locale.code.toUpperCase() }}</option>
        }
      </select>
    </div>
  </header>

  @if (loading() && !page()) {
    <div class="content-area">
      <p class="status-message">Loading...</p>
    </div>
  }
  @if (error()) {
    <div class="content-area">
      <p class="status-message error">{{ error() }}</p>
    </div>
  }

  @if (page(); as p) {
    <article class="content-area">
      <h1>{{ p.title }}</h1>
      @if (p.locale !== activeLang()) {
        <p class="fallback-note">
          {{ activeLang() === 'ua'
            ? 'Показано англійську версію (fallback).'
            : 'Showing English fallback.' }}
        </p>
      }
      <div class="page-content" [innerHTML]="p.content"></div>
    </article>
  }

  <app-site-footer [lang]="activeLang()"></app-site-footer>
</div>
