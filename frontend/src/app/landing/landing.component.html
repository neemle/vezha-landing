<div class="page">
  <header class="topbar">
    <a class="brand" href="/">
      <img class="logo" src="assets/images/logo.svg" alt="VEZHA" />
    </a>
    <nav class="nav-links">
      @if (content(); as c) {
        @for (item of c.nav; track item.target) {
          <a class="nav-link" (click)="scrollTo(item.target); $event.preventDefault()" [attr.href]="'#' + item.target">
            {{ item.label }}
          </a>
        }
      }
    </nav>
    <div class="top-actions">
      <div class="lang-switch">
        <label class="lang-select">
          <select
            aria-label="Language"
            #langSelect
            [value]="activeLang()"
            (change)="switchLang(langSelect.value)"
          >
            @for (locale of activeLocales(); track locale.code) {
              <option [value]="locale.code">{{ locale.code.toUpperCase() }}</option>
            }
          </select>
        </label>
      </div>
    </div>
  </header>

  @if (loading() && !content()) {
    <section class="hero-section">
      <div class="banner info">Loading content...</div>
    </section>
  }

  @if (error() && !content()) {
    <section class="hero-section">
      <div class="banner danger">{{ error() }}</div>
    </section>
  }

  @if (content(); as copy) {
    <section class="hero-section" id="hero">
      <div class="hero">
        <div class="hero-text">
          <h1>{{ copy.hero.title }}</h1>
          <p class="subtitle">{{ copy.hero.subtitle }}</p>
          <button class="btn-primary" type="button" (click)="scrollTo('contact')">
            {{ copy.hero.primaryCta }}
          </button>
        </div>
        <div class="hero-badges">
          @for (item of copy.hero.bullets; track item; let i = $index) {
            <div class="hero-badge" [class.alt]="i % 2 !== 0">
              <span class="hero-badge-text">{{ item }}</span>
            </div>
          }
        </div>
      </div>
    </section>

    <section class="section-block pain" id="pain">
      <div class="container">
        <div class="section-heading">
          <span class="eyebrow">{{ copy.sections.pain.eyebrow }}</span>
          <h2>{{ copy.sections.pain.heading }}</h2>
        </div>
        <div class="pain-grid">
          @for (risk of copy.painPoints; track risk.title; let i = $index) {
            @if (i === 0) {
              <article class="pain-image-card pain-span-2">
                <img src="assets/images/pain-chaos.jpg" alt="" loading="lazy" />
                <div class="pain-image-overlay"></div>
              </article>
            }
            <article class="card pain-card">
              <div class="card-icon-circle">
                @if (isFaIcon(risk.icon)) {
                  <i class="fa-solid" [ngClass]="risk.icon"></i>
                } @else {
                  <span class="icon-text">{{ risk.icon || '•' }}</span>
                }
              </div>
              <h3>{{ risk.title }}</h3>
              <p>{{ risk.description }}</p>
            </article>
            @if (i === 2) {
              <article class="pain-image-card">
                <img src="assets/images/pain-laptop.jpg" alt="" loading="lazy" />
                <div class="pain-image-overlay"></div>
              </article>
            }
          }
          <article class="card cta-card">
            <h3>{{ copy.sections.pain.ctaTitle }}</h3>
            <button class="btn-primary" type="button" (click)="scrollTo('contact')">
              {{ copy.hero.primaryCta }}
            </button>
          </article>
        </div>
      </div>
    </section>

    <section class="section-block features" id="features">
      <div class="container">
        <div class="section-heading">
          <span class="eyebrow">{{ copy.sections.features.eyebrow }}</span>
          <h2>{{ copy.sections.features.heading }}</h2>
        </div>
        <div class="features-grid">
          @for (feature of copy.features; track feature.title) {
            <article class="card feature-card">
              <div class="card-icon-circle">
                @if (isFaIcon(feature.icon)) {
                  <i class="fa-solid" [ngClass]="feature.icon"></i>
                } @else {
                  <span class="icon-text">{{ feature.icon || '•' }}</span>
                }
              </div>
              <h3>{{ feature.title }}</h3>
              <p>{{ feature.description }}</p>
            </article>
          }
        </div>
        <div class="section-cta">
          <button class="btn-primary" type="button" (click)="scrollTo('contact')">
            {{ copy.hero.primaryCta }}
          </button>
        </div>
      </div>
    </section>

    <section class="section-block comparison" id="comparison">
      <div class="container">
        <div class="section-heading">
          <span class="eyebrow">{{ copy.comparison.highlight }}</span>
          <h2>{{ copy.sections.comparison.heading }}</h2>
        </div>
        <div class="comparison-card">
          <img
            class="comparison-bg"
            src="assets/images/server-rack.jpg"
            alt=""
            loading="lazy"
          />
          <div class="comparison-overlay"></div>
          <div class="comparison-content">
            <div class="comparison-col">
              <div class="pill pill-muted">Sysadmin</div>
              <p class="comparison-title">{{ copy.comparison.sysadmin.title }}</p>
              <p class="comparison-desc">{{ copy.comparison.sysadmin.description }}</p>
            </div>
            <div class="comparison-col">
              <div class="pill pill-accent">{{ copy.comparison.vezha.badge }}</div>
              <p class="comparison-title">{{ copy.comparison.vezha.title }}</p>
              <p class="comparison-desc">{{ copy.comparison.vezha.description }}</p>
              <button class="btn-primary" type="button" (click)="scrollTo('contact')">
                {{ copy.hero.primaryCta }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-block metrics" id="metrics">
      <div class="container">
        <div class="section-heading">
          <span class="eyebrow">{{ copy.sections.metrics.eyebrow }}</span>
          <h2>{{ copy.sections.metrics.heading }}</h2>
        </div>
        <div class="stats-grid">
          @for (stat of copy.metrics.stats; track stat.label) {
            <div class="stat-card">
              <div class="stat-value">{{ stat.value }}</div>
              <div class="stat-label">{{ stat.label }}</div>
            </div>
          }
        </div>
      </div>
    </section>

    <section class="section-block how-section" id="how">
      <div class="container how-layout">
        <div class="how-left">
          <span class="eyebrow eyebrow-light">{{ copy.sections.howItWorks.eyebrow }}</span>
          <h2>{{ copy.sections.howItWorks.heading }}</h2>
          <button class="btn-primary" type="button" (click)="scrollTo('contact')">
            {{ copy.hero.primaryCta }}
          </button>
        </div>
        <div class="steps-grid">
          @for (step of copy.howItWorks; track step.title; let i = $index) {
            <div class="step-card">
              <div class="step-index">{{ i + 1 }}</div>
              <h3>{{ step.title }}</h3>
              <p>{{ step.description }}</p>
            </div>
          }
        </div>
      </div>
    </section>

    <section class="section-block contact-section" id="contact">
      <div class="container contact-layout">
        <div class="contact-text">
          <span class="eyebrow eyebrow-light">{{ copy.sections.contact.eyebrow }}</span>
          <h2>{{ copy.contact.title }}</h2>
          <p class="contact-subtitle">{{ copy.contact.subtitle }}</p>
        </div>
        <form class="contact-form" [formGroup]="contactForm" (ngSubmit)="submitLead()">
          <input
            type="text"
            formControlName="name"
            [placeholder]="copy.contact.form.nameLabel"
          />
          <input
            type="email"
            formControlName="email"
            [placeholder]="copy.contact.form.emailLabel + ' *'"
          />
          @if (contactForm.controls.email.touched && contactForm.controls.email.invalid) {
            <small class="field-error" *ngIf="contactForm.controls.email.errors?.['required']">
              {{ copy.contact.form.errors.requiredEmail }}
            </small>
            <small class="field-error" *ngIf="contactForm.controls.email.errors?.['email']">
              {{ copy.contact.form.errors.invalidEmail }}
            </small>
          }
          <input
            type="tel"
            formControlName="phone"
            [placeholder]="copy.contact.form.phoneLabel"
          />
          <textarea
            formControlName="message"
            rows="3"
            [placeholder]="copy.contact.form.messageLabel"
          ></textarea>
          <button class="btn-primary btn-wide" type="submit" [disabled]="submitting()">
            {{ submitting() ? copy.sections.submitting : copy.contact.form.submitLabel }}
          </button>
          @if (submitted()) {
            <div class="success-msg">{{ copy.contact.thankYou }}</div>
          }
          @if (error() && !loading()) {
            <div class="error-msg">{{ error() }}</div>
          }
        </form>
      </div>
    </section>
  }

  <app-site-footer [lang]="activeLang()"></app-site-footer>
</div>
